plugins {
    id 'java-library'
    id 'org.openjfx.javafxplugin' version "$jfxPlugin" apply false
    id 'org.beryx.jlink' version "$jlink" apply false
    id 'com.vanniktech.maven.publish' version "$mavenPublishPlugin" apply false
}

group 'io.github.palexdev'

subprojects {
    apply plugin: "java-library"
    apply plugin: "org.openjfx.javafxplugin"
    apply plugin: "com.vanniktech.maven.publish"

    gradle.taskGraph.whenReady { graph ->
        if (graph.hasTask(javaSourcesJar)) {
            javaSourcesJar.enabled = false
        }
        if (graph.hasTask(simpleJavadocJar)) {
            simpleJavadocJar.enabled = false
        }
    }

    repositories {
        mavenCentral()
    }

    configurations {
        testImplementation.extendsFrom compileOnly
    }

    dependencies {
        testImplementation "org.junit.jupiter:junit-jupiter-api:$junit"
        testRuntimeOnly "org.junit.jupiter:junit-jupiter-engine:$junit"

        testImplementation "org.testfx:testfx-junit5:$testfx"
        testImplementation "io.github.palexdev:scenicview:$scenicView"
    }

    javafx {
        version = "$jfx"
        modules = ["javafx.controls", "javafx.fxml"]
        configuration = "compileOnly"
    }

    configurations {
        testImplementation.extendsFrom compileOnly
    }

    compileJava {
        sourceCompatibility = "$jdk"
        targetCompatibility = "$jdk"
    }

    compileTestJava {
        sourceCompatibility = "$testJdk"
        targetCompatibility = "$testJdk"
        moduleOptions {
            compileOnClasspath = true
        }
    }

    test {
        useJUnitPlatform()
        moduleOptions {
            runOnClasspath = true
        }
    }
}



